"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function workingSubMenu(t,e,n,a){var o=getElementbyTagNameWithDataAttributeAll(e,n,a),d=getElementbyTagNameWithDataAttributeAll(t,n,a);d.matches.forEach(function(t){return t.classList.add("active")}),d.unmatched.forEach(function(t){return t.classList.remove("active")}),o.matches.forEach(function(t){return t.classList.add("on")}),o.unmatched.forEach(function(t){return t.classList.remove("on")})}function workingMainMenu(t){var e=getElementbyTagNameWithDataAttributeAll("div","dashboardsection",t.target.dataset.dashboardsection),n=getElementbyTagNameWithDataAttributeAll("a","dashboardsection",t.target.dataset.dashboardsection);n.matches.forEach(function(t){return t.classList.add("active")}),n.unmatched.forEach(function(t){return t.classList.remove("active")}),e.matches.forEach(function(t){return t.classList.remove("off")}),e.unmatched.forEach(function(t){return t.classList.add("off")})}var _createClass=function(){function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}}(),Form=function(){function o(t,e,n,a){_classCallCheck(this,o),self.title=t,self.imagelink=e,self.content=n,self.tags=a}return _createClass(o,[{key:"json",get:function(){return JSON.stringify({title:self.title,imagelink:self.imagelink,content:self.content,tags:self.tags})}}]),o}();window.addEventListener("load",function(){document.getElementById("dashboardMainMenu").addEventListener("click",function(t){workingMainMenu(t)});var t=document.getElementById("dashboardPostMenu"),e=document.getElementById("dashboardPortfolioMenu");document.getElementById("dashboardUserMenu");t.addEventListener("click",function(t){workingSubMenu("a","div","posts",t.target.dataset.posts)}),e.addEventListener("click",function(t){workingSubMenu("a","div","portfolio",t.target.dataset.portfolio)})});var titleAddPost=document.getElementById("post-title-add"),contentAddPost=document.getElementById("post-content-add"),imageAddPost=document.getElementById("post-image-add"),tagsAddPost=document.getElementById("post-tags-add"),addForm=document.getElementById("form-add");addForm.addEventListener("submit",function(t){t.preventDefault();var e={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:new Form(titleAddPost.value,imageAddPost.value,editor_add.getData(),tagsAddPost.value).json},n=document.getElementById("form-add-message-success");sendJson("addPost",e).then(function(t){return 201==t.status?t.json():"perdeu playba"}).then(function(t){n.href=t.link,n.textContent="Permalink para o post: "+t.link,document.getElementById("post-submitbutton-add").classList.add("disabled");var e=document.getElementById("add-success");toggleClasses(e,"on","off","animated","fadeIn")})},!1);var idEditPost=document.getElementById("post-id-edit"),titleEditPost=document.getElementById("post-title-edit"),contentEditPost=document.getElementById("post-content-edit"),imageEditPost=document.getElementById("post-image-edit"),tagsEditPost=document.getElementById("post-tags-edit"),editForm=document.getElementById("form-edit");idEditPost.addEventListener("input",function(t){postGetJson(t.target.value).then(function(t){titleEditPost.value=t.title,imageEditPost.value=t.imagelink,tagsEditPost.value=t.tags,editor_edit.setData(t.content)})}),editForm.addEventListener("submit",function(t){t.preventDefault();var e={method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:new Form(titleEditPost.value,imageEditPost.value,editor_edit.getData(),tagsEditPost.value).json},n=document.getElementById("form-edit-message-success");sendJsonWithObj("editPost",{postid:idEditPost.value},e).then(function(t){return 202==t.status?t.json():console.log("perdeu playba")}).then(function(t){n.href=t.link,n.textContent="Permalink para o post: "+t.link,document.getElementById("post-submitbutton-edit").classList.add("disabled");var e=document.getElementById("edit-success");toggleClasses(e,"on","off","animated","fadeIn")})},!1);var idDelPost=document.getElementById("post-id-del"),titleDelPost=document.getElementById("post-title-del");idDelPost.addEventListener("input",function(t){postGetJson(t.target.value).then(function(t){titleDelPost.value=t.title})});var delForm=document.getElementById("form-del");delForm.addEventListener("submit",function(t){t.preventDefault();document.getElementById("form-del-message-success");sendJsonWithObj("deletePost",{postid:idDelPost.value},{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(t){return 200==t.status?t.json():"perdeu playba"}).then(function(t){document.getElementById("post-submitbutton-del").classList.add("disabled");var e=document.getElementById("del-success");toggleClasses(e,"on","off","animated","fadeIn")})},!1);